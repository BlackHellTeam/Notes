# 2016-04-20

### Start a Service in New Process

1. Client通过进程间通信向ActivityManagerService发送一个启动Server请求（Step 1 到 Step 4）
2. ActivityManagerService处理从Client发过来的START_SERVICE_TRANSACTION的进程间通信请求，ActivityManagerService在其中发现这个新进程还不存在，于是在Step8中通过调用Process类的静态成员函数start来创建新进程（Step 5 到 Step 8）
3. 新进程创建ing，创建完成后又通过进程间通信向ActivityManagerService发送ATTACH_APPLICATION_TRANSACTION告知其创建完成（Step 9 到 Step 10）
4. ActivityManagerService处理新进程发来的跨进程通信，并将服务的相关信息连同一个进程间通信SCHEDULE_CREATE_TRANSACTION告诉新进程（Step 11 到 Step 14）
5. 新进程处理ActivityManagerService发过来的跨进程通信，并搞出Service，调用其onCreate方法（Step 15 到 Step 19）

![Start a Service in New Process](https://github.com/Nightonke/Notes/blob/master/Pictures/StartServerInNewProcess.png)
